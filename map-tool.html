<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë„¤ì´ë²„ ë§í¬ ë§Œë“¤ê¸°</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Noto Sans KR, sans-serif; 
  max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
}
.container { background: rgba(255,255,255,0.95); border-radius: 20px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
h1 { text-align: center; color: #333; margin-bottom: 10px; font-size: 2em; }
.subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em; }

.input-section, .types-section { margin-bottom: 25px; }
input { 
  width: 100%; padding: 18px; font-size: 16px; border: 2px solid #e1e5e9; border-radius: 12px; 
  transition: all 0.3s; background: #fff; margin-bottom: 15px;
}
input:focus { outline: none; border-color: #03c75a; box-shadow: 0 0 0 3px rgba(3,199,90,0.1); }

.btn { 
  width: 100%; padding: 20px; font-size: 18px; font-weight: 600; 
  background: linear-gradient(135deg, #03c75a, #02a84a); 
  color: white; border: none; border-radius: 12px; cursor: pointer; 
  transition: all 0.3s; position: relative; overflow: hidden;
}
.btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(3,199,90,0.4); }
.btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.btn.loading::after { content: ''; position: absolute; top: 50%; left: 50%; width: 20px; height: 20px; border: 2px solid rgba(255,255,255,.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s linear infinite; transform: translate(-50%,-50%); }
@keyframes spin { to { transform: translate(-50%,-50%) rotate(360deg); } }

.property-types, .deal-types { display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0; padding: 15px; background: rgba(255,255,255,0.5); border-radius: 12px; }
.property-title, .deal-title { font-weight: 600; margin-bottom: 10px; font-size: 15px; color: #333; }
.toggle-btn { 
  padding: 10px 14px; border: 2px solid #ddd; background: white; border-radius: 20px; 
  cursor: pointer; font-size: 13px; font-weight: 500; transition: all 0.2s; white-space: nowrap;
}
.toggle-btn[data-checked="true"] { background: #03c75a !important; color: white !important; border-color: #03c75a !important; }
.toggle-btn:hover:not([data-checked="true"]) { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
.radio-btns .toggle-btn { border-radius: 8px; }

.success-msg { 
  display: none; background: linear-gradient(135deg, #e8f5e8, #d4edda); 
  border: 2px solid #28a745; border-radius: 12px; padding: 20px; text-align: center;
  margin-top: 20px; color: #155724; font-weight: 600;
}
.success-msg.show { display: block; animation: fadeIn 0.5s ease-in; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.error-msg { 
  background: linear-gradient(135deg, #f8d7da, #f5c6cb); 
  border: 2px solid #dc3545; border-radius: 12px; padding: 15px; 
  color: #721c24; font-weight: 500; margin-top: 15px; display: none;
}

@media (max-width: 600px) { 
  .container { padding: 20px; margin: 10px; } 
  h1 { font-size: 1.6em; } 
  .property-types, .deal-types { gap: 8px; }
  .toggle-btn { padding: 8px 12px; font-size: 12px; }
}
</style>
</head>
<body>
<div class="container">
  <h1>ğŸ”— ë„¤ì´ë²„ ë§í¬ ë§Œë“¤ê¸°</h1>
  <p class="subtitle">ì£¼ì†Œ ì…ë ¥ í›„ ë§¤ë¬¼/ê±°ë˜ ìœ í˜• ì„ íƒ â†’ ë²„íŠ¼ í´ë¦­ ì‹œ ë„¤ì´ë²„ ì§€ë„+ë¶€ë™ì‚° ìë™ ì—´ë¦¼</p>

  <!-- ë§¤ë¬¼/ê±°ë˜ ìœ í˜• ë¨¼ì € (ìœ„ì¹˜ ë³€ê²½) -->
  <div class="types-section">
    <div class="input-section">
      <div class="property-title">ğŸ“‹ ë§¤ë¬¼ ìœ í˜• (ë³µìˆ˜ ì„ íƒ)</div>
      <div class="property-types" id="property-types">
        <button class="toggle-btn" data-value="APTHGJ">ì§€ì‹ì‚°ì—…ì„¼í„°</button>
        <button class="toggle-btn" data-value="SG" data-checked="true">ìƒê°€</button>
        <button class="toggle-btn" data-value="SMS" data-checked="true">ì‚¬ë¬´ì‹¤</button>
        <button class="toggle-btn" data-value="TJ">í† ì§€</button>
        <button class="toggle-btn" data-value="GM">ê±´ë¬¼</button>
      </div>
      
      <div class="deal-title">ğŸ’° ê±°ë˜ ìœ í˜• (ë‹¨ì¼ ì„ íƒ)</div>
      <div class="deal-types radio-btns" id="deal-types">
        <button class="toggle-btn radio" data-value="A1">ë§¤ë§¤</button>
        <button class="toggle-btn radio" data-value="B1">ì „ì„¸</button>
        <button class="toggle-btn radio" data-value="B2" data-checked="true">ì›”ì„¸</button>
        <button class="toggle-btn radio" data-value="B3">ë‹¨ê¸°ì„ëŒ€</button>
      </div>
    </div>
  </div>

  <!-- ì…ë ¥ì°½ + ë²„íŠ¼ (ì•„ë˜ë¡œ ì´ë™) -->
  <div class="input-section">
    <input id="address" placeholder="ì˜ˆ: ì„œìš¸ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 123-45" />
    <button id="convertBtn" class="btn">ğŸš€ ë„¤ì´ë²„ ë§í¬ ìƒì„± (ì§€ë„+ë¶€ë™ì‚° ìë™ ì—´ê¸°)</button>
  </div>

  <div id="successMsg" class="success-msg">
    âœ… ë„¤ì´ë²„ ì§€ë„ì™€ ë¶€ë™ì‚° í˜ì´ì§€ê°€ ìë™ìœ¼ë¡œ ì—´ë ¸ìŠµë‹ˆë‹¤!
  </div>
  <div id="errorMsg" class="error-msg"></div>
</div>

<script>
// ì¹´ì¹´ì˜¤ API í‚¤ (í™•ì¥í”„ë¡œê·¸ë¨ê³¼ ë™ì¼)
const API_KEY = "5aa11b53a04d1bd6f78c87e27a21a400";
let isFetching = false;

// í™•ì¥í”„ë¡œê·¸ë¨ê³¼ 100% ë™ì¼í•œ ë„¤ì´ë²„ ë§í¬ ìƒì„± + ìë™ ì°½ ì—´ê¸°
async function convertToNaverLinks() {
  const address = document.getElementById('address').value.trim();
  const btn = document.getElementById('convertBtn');
  const successMsg = document.getElementById('successMsg');
  const errorMsg = document.getElementById('errorMsg');
  
  if (!address) {
    showError('ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
    return;
  }
  if (isFetching) return;
  
  // UI ë¡œë”© ìƒíƒœ
  isFetching = true;
  btn.disabled = true;
  btn.classList.add('loading');
  btn.innerHTML = 'â³ ì¢Œí‘œ ë³€í™˜ ì¤‘...';
  hideMessages();
  
  try {
    // í™•ì¥í”„ë¡œê·¸ë¨ê³¼ ë™ì¼í•œ ì¹´ì¹´ì˜¤ Geocoding API
    const data = await fetch(`https://dapi.kakao.com/v2/local/search/address.json?query=${encodeURIComponent(address)}`, {
      headers: { 'Authorization': `KakaoAK ${API_KEY}` }
    }).then(r => r.json());
    
    if (!data.documents || data.documents.length === 0) {
      throw new Error('ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }
    
    // í™•ì¥í”„ë¡œê·¸ë¨ê³¼ ë™ì¼í•œ ì¢Œí‘œ ì¶”ì¶œ
    const lat = parseFloat(data.documents[0].y);
    const lon = parseFloat(data.documents[0].x);
    
    // í™•ì¥í”„ë¡œê·¸ë¨ê³¼ ë™ì¼í•œ ë§¤ë¬¼/ê±°ë˜ ìœ í˜• ë¡œì§
    const propertyTypes = Array.from(document.querySelectorAll('.toggle-btn:not(.radio)[data-checked="true"]'))
                                .map(btn => btn.dataset.value);
    const dealType = document.querySelector('.toggle-btn.radio[data-checked="true"]')?.dataset.value || "";
    
    // âœ… í™•ì¥í”„ë¡œê·¸ë¨ê³¼ 100% ë™ì¼í•œ ë„¤ì´ë²„ ë¶€ë™ì‚° ë§í¬
    let landUrl = `https://new.land.naver.com/offices?ms=${lat},${lon},19`;
    if (propertyTypes.length) landUrl += `&a=${propertyTypes.join(':')}`;
    if (dealType) landUrl += `&b=${dealType}`;
    
    // ì§€ë„ ë§í¬ë„ ë™ì¼
    let mapUrl = `https://map.naver.com/p/search/${encodeURIComponent(address)}/address/${lon},${lat},${encodeURIComponent(address)},new?c=18.00,0,0,0,dh&isCorrectAnswer=true`;
    
    // âœ… ë„¤ì´ë²„ ì§€ë„ + ë¶€ë™ì‚° 2ê°œ ì°½ ìë™ ì—´ê¸°
    window.open(mapUrl, '_blank');
    window.open(landUrl, '_blank');
    
    // ì„±ê³µ ë©”ì‹œì§€
    successMsg.classList.add('show');
    
  } catch (error) {
    showError('ì£¼ì†Œ ë³€í™˜ ì˜¤ë¥˜: ' + error.message);
  } finally {
    isFetching = false;
    btn.disabled = false;
    btn.classList.remove('loading');
    btn.innerHTML = 'ğŸš€ ë„¤ì´ë²„ ë§í¬ ìƒì„± (ì§€ë„+ë¶€ë™ì‚° ìë™ ì—´ê¸°)';
  }
}

function showError(message) {
  const errorMsg = document.getElementById('errorMsg');
  errorMsg.textContent = message;
  errorMsg.style.display = 'block';
}

function hideMessages() {
  document.getElementById('successMsg').classList.remove('show');
  document.getElementById('errorMsg').style.display = 'none';
}

// í† ê¸€ ë²„íŠ¼ ì´ë²¤íŠ¸ (í™•ì¥í”„ë¡œê·¸ë¨ê³¼ ë™ì¼)
function setupToggleButtons() {
  // ë§¤ë¬¼ ìœ í˜• (ë³µìˆ˜ì„ íƒ)
  document.querySelectorAll('#property-types .toggle-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const isChecked = btn.dataset.checked === 'true';
      btn.dataset.checked = (!isChecked).toString();
    });
  });
  
  // ê±°ë˜ ìœ í˜• (ë‹¨ì¼ì„ íƒ)
  document.querySelectorAll('#deal-types .toggle-btn.radio').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('#deal-types .toggle-btn.radio').forEach(b => {
        b.dataset.checked = 'false';
      });
      btn.dataset.checked = 'true';
    });
  });
}

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
  setupToggleButtons();
  
  document.getElementById('convertBtn').addEventListener('click', convertToNaverLinks);
  document.getElementById('address').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') convertToNaverLinks();
  });
  
  // URL íŒŒë¼ë¯¸í„° ìë™ ì‹¤í–‰ (ë…¸ì…˜ì—ì„œ ì‚¬ìš©ì‹œ í¸ë¦¬)
  const params = new URLSearchParams(location.search);
  const addr = params.get('address') || params.get('addres') || params.get('addr');
  if (addr) {
    document.getElementById('address').value = decodeURIComponent(addr);
  }
});
</script>
</body>
</html>
 
