<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>μ£Όμ†β†’μΆν‘</title>
</head>
<body>
<h1>π“ μ£Όμ† β†’ μΆν‘ λ³€ν™</h1>
<input id="address" placeholder="μ: μ„μΈνΉλ³„μ‹ κ°•λ‚¨κµ¬ ν…ν—¤λ€λ΅ 123" style="width:100%;padding:12px;font-size:16px;border:1px solid #ddd;">
<button onclick="findCoords()" style="width:100%;padding:12px;font-size:16px;background:#03c75a;color:white;border:none;margin:10px 0;cursor:pointer;">π” μΆν‘ μ°ΎκΈ° & λ³µμ‚¬</button>
<div id="result" style="display:none;padding:15px;background:#f0f9f4;border-left:4px solid #03c75a;">
  <strong>β… μΆν‘ λ³µμ‚¬ μ™„λ£!</strong><br>
  <div id="coords" style="background:#333;color:#0f0;padding:12px;font-family:monospace;border-radius:4px;margin-top:10px;"></div>
</div>

<script>
async function findCoords() {
  const address = document.getElementById('address').value.trim();
  if (!address) return alert('μ£Όμ†λ¥Ό μ…λ ¥ν•μ„Έμ”!');
  
  const btn = document.querySelector('button');
  btn.disabled = true;
  btn.innerHTML = 'β³ κ²€μƒ‰μ¤‘...';
  
  try {
    const proxyUrl = 'https://api.allorigins.win/get?url=';
    const apiUrl = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1&addressdetails=1&countrycodes=kr`;
    
    const response = await fetch(proxyUrl + encodeURIComponent(apiUrl));
    const proxyData = await response.json();
    const data = JSON.parse(proxyData.contents);
    
    if (data && data.length > 0) {
      const lat = parseFloat(data[0].lat);
      const lng = parseFloat(data[0].lon);
      const coordsText = `${lat.toFixed(6)},${lng.toFixed(6)}`;
      
      // μλ™ λ³µμ‚¬
      await navigator.clipboard.writeText(coordsText);
      
      // κ²°κ³Ό ν‘μ‹
      document.getElementById('coords').textContent = coordsText;
      document.getElementById('result').style.display = 'block';
      document.getElementById('result').scrollIntoView({behavior: 'smooth'});
      
    } else {
      throw new Error('μ£Όμ† μ°ΎκΈ° μ‹¤ν¨');
    }
    
  } catch (error) {
    alert('β μ£Όμ† μ°ΎκΈ° μ‹¤ν¨\n\nλ„λ΅λ…μ£Όμ†λ΅ μ •ν™•ν μ…λ ¥:\n"μ„μΈνΉλ³„μ‹ κ°•λ‚¨κµ¬ ν…ν—¤λ€λ΅ 123"');
  } finally {
    btn.disabled = false;
    btn.innerHTML = 'π” μΆν‘ μ°ΎκΈ° & λ³µμ‚¬';
  }
}

// URL νλΌλ―Έν„° μλ™ μ‹¤ν–‰
const urlParams = new URLSearchParams(location.search);
const addr = urlParams.get('address');
if (addr) {
  document.getElementById('address').value = decodeURIComponent(addr);
  setTimeout(findCoords, 1000);
}

document.getElementById('address').addEventListener('keypress', e => {
  if (e.key === 'Enter') findCoords();
});
</script>
</body>
</html>
