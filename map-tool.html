<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>주소→좌표 (완벽 작동)</title>
</head>
<body>
<input id="address" placeholder="주소 입력">
<button onclick="findCoords()">좌표 찾기</button>
<div id="map" style="height:400px;"></div>
<div id="coords" style="display:none;"></div>

<script>
async function findCoords() {
  const address = document.getElementById('address').value.trim();
  if (!address) return alert('주소 입력!');
  
  try {
    // Google Geocoding API (무료, CORS 안전)
    const response = await fetch(
      `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1&addressdetails=1`
    );
    const data = await response.json();
    
    if (data.length > 0) {
      const lat = parseFloat(data[0].lat);
      const lng = parseFloat(data[0].lon);
      
      document.getElementById('coords').textContent = `${lat.toFixed(6)},${lng.toFixed(6)}`;
      document.getElementById('coords').style.display = 'block';
      
      document.getElementById('map').innerHTML = `
        <iframe width="100%" height="400" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3241!2d${lng}!3d${lat}!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0:0x0!2z${lat.toFixed(6)},${lng.toFixed(6)}!5e0!3m2!1sko!2skr!4v1630000000000" allowfullscreen></iframe>
      `;
    }
  } catch(e) {
    alert('실패');
  }
}
</script>
</body>
</html>
